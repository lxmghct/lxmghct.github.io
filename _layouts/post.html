---
layout: default
---
<div class="post">

  <header class="post-header">
    <h1 class="post-title">{{ page.title }}</h1>
    <div class="info">
      <p class="post-meta">
        <i class="fa fa-calendar"></i>
        &nbsp;
        {{ page.date | date:"%Y-%m-%d" }}
        {% if page.author %} • {{ page.author }}{% endif %}
        {% if page.meta %} • {{ page.meta }}{% endif %}
      </p>
      {% if page.categories %}
      <i class="fa fa-folder-open"></i>
      {% for category in page.categories %}
      <a class="pjaxlink" href="{{ site.url }}/pages/classify.html#{{ category }}">{{ category }}</a>
      {% endfor %}
      &nbsp;
      {% endif %}
      {% if page.tags.size > 0 %}
      <i class="fa fa-tags"></i>
      <span class="index-post-tag">
        {% for tag in page.tags %}
        <a class="pjaxlink" data-tag="{{ tag }}">{{ tag }}</a>
        {% endfor %}
      </span>
      {% endif %}
    </div>
  </header>

  <article class="post-content">
    {{ content }}
  </article>
</div>

<div class="prevandnext">
  {% if page.next %}
  <div style="margin:0.5em;">
    <span>上一篇 ：</span><a class="pjaxlink" href="{{ site.url }}{{ page.next.url }}" title="{{ page.next.title }}">{{
      page.next.title }}</a>
  </div>
  {% endif %}
  {% if page.previous %}
  <div style="margin:0.5em;">
    <span>下一篇 ：</span><a class="pjaxlink" href="{{ site.url }}{{ page.previous.url }}"
      title="{{ page.previous.title }}">{{ page.previous.title }}</a>
  </div>
  {% endif %}
  <div style="margin:0.5em;">
    <span> 版权所有，转载时必须以链接形式注明原始出处</span>
  </div>

</div>


<script>
  // 点击<a>跳转到/pages/tags.html#{{ name }}
  document.querySelectorAll(".index-post-tag a").forEach(function (item) {
    item.addEventListener("click", function () {
      window.location.href = "/pages/tags.html#" + item.getAttribute("data-tag");
    });
  });

  // 生成目录
  // 获取文章内容的标题
  const headings = document.querySelectorAll(".post-content h1, .post-content h2, .post-content h3, .post-content h4, .post-content h5, .post-content h6");
  if (headings.length === 0) {
    document.querySelector(".toc-container").classList.add("hidden");
  } else {
    document.querySelector(".toc-container").classList.remove("hidden");
  }
  // 目录容器
  const tocList = document.getElementById("toc-list");
  const tempTocData = []

  // 遍历标题，生成目录
  headings.forEach((heading) => {
    const level = parseInt(heading.tagName.charAt(1), 10); // 获取标题级别
    const listItem = document.createElement("li");
    const link = document.createElement("a");

    link.textContent = heading.textContent;
    if (!heading.id) {
      heading.id = heading.textContent.replace(/\s+/g, "-").toLowerCase();
    }
    link.href = `#${heading.id}`;
    listItem.appendChild(link);
    tocList.appendChild(listItem);
    tempTocData.push({
      level: level,
      dom: listItem
    })
  });

  // 设置目录项的左边距
  const minLevel = Math.min(...tempTocData.map(item => item.level))
  tempTocData.forEach(item => {
    let diff = item.level - minLevel
    item.dom.style.marginLeft = diff * 20 + "px"
    if (diff === 0) {
      item.dom.classList.add("root-toc")
    }
  })

</script>
